function hex_md5(t){return rstr2hex(rstr_md5(str2rstr_utf8(t)))}function b64_md5(t){return rstr2b64(rstr_md5(str2rstr_utf8(t)))}function any_md5(t,n){return rstr2any(rstr_md5(str2rstr_utf8(t)),n)}function hex_hmac_md5(t,n){return rstr2hex(rstr_hmac_md5(str2rstr_utf8(t),str2rstr_utf8(n)))}function b64_hmac_md5(t,n){return rstr2b64(rstr_hmac_md5(str2rstr_utf8(t),str2rstr_utf8(n)))}function any_hmac_md5(t,n,e){return rstr2any(rstr_hmac_md5(str2rstr_utf8(t),str2rstr_utf8(n)),e)}function md5_vm_test(){return"900150983cd24fb0d6963f7d28e17f72"==hex_md5("abc").toLowerCase()}function rstr_md5(t){return binl2rstr(binl_md5(rstr2binl(t),8*t.length))}function rstr_hmac_md5(t,n){var e=rstr2binl(t);e.length>16&&(e=binl_md5(e,8*t.length));for(var a=Array(16),r=Array(16),o=0;o<16;o++)a[o]=909522486^e[o],r[o]=1549556828^e[o];var i=binl_md5(a.concat(rstr2binl(n)),512+8*n.length);return binl2rstr(binl_md5(r.concat(i),640))}function rstr2hex(t){try{}catch(t){hexcase=0}for(var n,e=hexcase?"0123456789ABCDEF":"0123456789abcdef",a="",r=0;r<t.length;r++)n=t.charCodeAt(r),a+=e.charAt(n>>>4&15)+e.charAt(15&n);return a}function rstr2b64(t){try{}catch(t){b64pad=""}for(var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e="",a=t.length,r=0;r<a;r+=3)for(var o=t.charCodeAt(r)<<16|(r+1<a?t.charCodeAt(r+1)<<8:0)|(r+2<a?t.charCodeAt(r+2):0),i=0;i<4;i++)e+=8*r+6*i>8*t.length?b64pad:n.charAt(o>>>6*(3-i)&63);return e}function rstr2any(t,n){var e,a,r,o,i,s=n.length,c=Array(Math.ceil(t.length/2));for(e=0;e<c.length;e++)c[e]=t.charCodeAt(2*e)<<8|t.charCodeAt(2*e+1);var d=Math.ceil(8*t.length/(Math.log(n.length)/Math.log(2))),l=Array(d);for(a=0;a<d;a++){for(i=Array(),o=0,e=0;e<c.length;e++)o=(o<<16)+c[e],r=Math.floor(o/s),o-=r*s,(i.length>0||r>0)&&(i[i.length]=r);l[a]=o,c=i}var m="";for(e=l.length-1;e>=0;e--)m+=n.charAt(l[e]);return m}function str2rstr_utf8(t){for(var n,e,a="",r=-1;++r<t.length;)n=t.charCodeAt(r),e=r+1<t.length?t.charCodeAt(r+1):0,55296<=n&&n<=56319&&56320<=e&&e<=57343&&(n=65536+((1023&n)<<10)+(1023&e),r++),n<=127?a+=String.fromCharCode(n):n<=2047?a+=String.fromCharCode(192|n>>>6&31,128|63&n):n<=65535?a+=String.fromCharCode(224|n>>>12&15,128|n>>>6&63,128|63&n):n<=2097151&&(a+=String.fromCharCode(240|n>>>18&7,128|n>>>12&63,128|n>>>6&63,128|63&n));return a}function str2rstr_utf16le(t){for(var n="",e=0;e<t.length;e++)n+=String.fromCharCode(255&t.charCodeAt(e),t.charCodeAt(e)>>>8&255);return n}function str2rstr_utf16be(t){for(var n="",e=0;e<t.length;e++)n+=String.fromCharCode(t.charCodeAt(e)>>>8&255,255&t.charCodeAt(e));return n}function rstr2binl(t){for(var n=Array(t.length>>2),e=0;e<n.length;e++)n[e]=0;for(var e=0;e<8*t.length;e+=8)n[e>>5]|=(255&t.charCodeAt(e/8))<<e%32;return n}function binl2rstr(t){for(var n="",e=0;e<32*t.length;e+=8)n+=String.fromCharCode(t[e>>5]>>>e%32&255);return n}function binl_md5(t,n){t[n>>5]|=128<<n%32,t[(n+64>>>9<<4)+14]=n;for(var e=1732584193,a=-271733879,r=-1732584194,o=271733878,i=0;i<t.length;i+=16){var s=e,c=a,d=r,l=o;e=md5_ff(e,a,r,o,t[i+0],7,-680876936),o=md5_ff(o,e,a,r,t[i+1],12,-389564586),r=md5_ff(r,o,e,a,t[i+2],17,606105819),a=md5_ff(a,r,o,e,t[i+3],22,-1044525330),e=md5_ff(e,a,r,o,t[i+4],7,-176418897),o=md5_ff(o,e,a,r,t[i+5],12,1200080426),r=md5_ff(r,o,e,a,t[i+6],17,-1473231341),a=md5_ff(a,r,o,e,t[i+7],22,-45705983),e=md5_ff(e,a,r,o,t[i+8],7,1770035416),o=md5_ff(o,e,a,r,t[i+9],12,-1958414417),r=md5_ff(r,o,e,a,t[i+10],17,-42063),a=md5_ff(a,r,o,e,t[i+11],22,-1990404162),e=md5_ff(e,a,r,o,t[i+12],7,1804603682),o=md5_ff(o,e,a,r,t[i+13],12,-40341101),r=md5_ff(r,o,e,a,t[i+14],17,-1502002290),a=md5_ff(a,r,o,e,t[i+15],22,1236535329),e=md5_gg(e,a,r,o,t[i+1],5,-165796510),o=md5_gg(o,e,a,r,t[i+6],9,-1069501632),r=md5_gg(r,o,e,a,t[i+11],14,643717713),a=md5_gg(a,r,o,e,t[i+0],20,-373897302),e=md5_gg(e,a,r,o,t[i+5],5,-701558691),o=md5_gg(o,e,a,r,t[i+10],9,38016083),r=md5_gg(r,o,e,a,t[i+15],14,-660478335),a=md5_gg(a,r,o,e,t[i+4],20,-405537848),e=md5_gg(e,a,r,o,t[i+9],5,568446438),o=md5_gg(o,e,a,r,t[i+14],9,-1019803690),r=md5_gg(r,o,e,a,t[i+3],14,-187363961),a=md5_gg(a,r,o,e,t[i+8],20,1163531501),e=md5_gg(e,a,r,o,t[i+13],5,-1444681467),o=md5_gg(o,e,a,r,t[i+2],9,-51403784),r=md5_gg(r,o,e,a,t[i+7],14,1735328473),a=md5_gg(a,r,o,e,t[i+12],20,-1926607734),e=md5_hh(e,a,r,o,t[i+5],4,-378558),o=md5_hh(o,e,a,r,t[i+8],11,-2022574463),r=md5_hh(r,o,e,a,t[i+11],16,1839030562),a=md5_hh(a,r,o,e,t[i+14],23,-35309556),e=md5_hh(e,a,r,o,t[i+1],4,-1530992060),o=md5_hh(o,e,a,r,t[i+4],11,1272893353),r=md5_hh(r,o,e,a,t[i+7],16,-155497632),a=md5_hh(a,r,o,e,t[i+10],23,-1094730640),e=md5_hh(e,a,r,o,t[i+13],4,681279174),o=md5_hh(o,e,a,r,t[i+0],11,-358537222),r=md5_hh(r,o,e,a,t[i+3],16,-722521979),a=md5_hh(a,r,o,e,t[i+6],23,76029189),e=md5_hh(e,a,r,o,t[i+9],4,-640364487),o=md5_hh(o,e,a,r,t[i+12],11,-421815835),r=md5_hh(r,o,e,a,t[i+15],16,530742520),a=md5_hh(a,r,o,e,t[i+2],23,-995338651),e=md5_ii(e,a,r,o,t[i+0],6,-198630844),o=md5_ii(o,e,a,r,t[i+7],10,1126891415),r=md5_ii(r,o,e,a,t[i+14],15,-1416354905),a=md5_ii(a,r,o,e,t[i+5],21,-57434055),e=md5_ii(e,a,r,o,t[i+12],6,1700485571),o=md5_ii(o,e,a,r,t[i+3],10,-1894986606),r=md5_ii(r,o,e,a,t[i+10],15,-1051523),a=md5_ii(a,r,o,e,t[i+1],21,-2054922799),e=md5_ii(e,a,r,o,t[i+8],6,1873313359),o=md5_ii(o,e,a,r,t[i+15],10,-30611744),r=md5_ii(r,o,e,a,t[i+6],15,-1560198380),a=md5_ii(a,r,o,e,t[i+13],21,1309151649),e=md5_ii(e,a,r,o,t[i+4],6,-145523070),o=md5_ii(o,e,a,r,t[i+11],10,-1120210379),r=md5_ii(r,o,e,a,t[i+2],15,718787259),a=md5_ii(a,r,o,e,t[i+9],21,-343485551),e=safe_add(e,s),a=safe_add(a,c),r=safe_add(r,d),o=safe_add(o,l)}return Array(e,a,r,o)}function md5_cmn(t,n,e,a,r,o){return safe_add(bit_rol(safe_add(safe_add(n,t),safe_add(a,o)),r),e)}function md5_ff(t,n,e,a,r,o,i){return md5_cmn(n&e|~n&a,t,n,r,o,i)}function md5_gg(t,n,e,a,r,o,i){return md5_cmn(n&a|e&~a,t,n,r,o,i)}function md5_hh(t,n,e,a,r,o,i){return md5_cmn(n^e^a,t,n,r,o,i)}function md5_ii(t,n,e,a,r,o,i){return md5_cmn(e^(n|~a),t,n,r,o,i)}function safe_add(t,n){var e=(65535&t)+(65535&n),a=(t>>16)+(n>>16)+(e>>16);return a<<16|65535&e}function bit_rol(t,n){return t<<n|t>>>32-n}var hexcase=0,b64pad="";!function(){function t(t,n){for(property in n)n.hasOwnProperty(property)&&(t[property]=n[property]);return t}function n(t,n){var e=document.createElement("div");e.className="notyf";var a=document.createElement("div");a.className="notyf-wrapper";var r=document.createElement("div");r.className="notyf-icon";var o=document.createElement("i");o.className=n;var i=document.createElement("div");i.className="notyf-message",i.innerHTML=t,r.appendChild(o),a.appendChild(r),a.appendChild(i),e.appendChild(a);var s=this;return setTimeout(function(){e.className+=" disappear",e.addEventListener(s.animationEnd,function(t){t.target==e&&s.container.removeChild(e)});var t=s.notifications.indexOf(e);s.notifications.splice(t,1)},s.options.delay),e}function e(){var t,n=document.createElement("fake"),e={transition:"animationend",OTransition:"oAnimationEnd",MozTransition:"animationend",WebkitTransition:"webkitAnimationEnd"};for(t in e)if(void 0!==n.style[t])return e[t]}this.Notyf=function(){this.notifications=[];var n={delay:2e3,alertIcon:"notyf-alert-icon",confirmIcon:"notyf-confirm-icon"};arguments[0]&&"object"==typeof arguments[0]?this.options=t(n,arguments[0]):this.options=n;var a=document.createDocumentFragment(),r=document.createElement("div");r.className="notyf-container",a.appendChild(r),document.body.appendChild(a),this.container=r,this.animationEnd=e()},this.Notyf.prototype.alert=function(t){var e=n.call(this,t,this.options.alertIcon);e.className+=" alert",this.container.appendChild(e),this.notifications.push(e)},this.Notyf.prototype.confirm=function(t){var e=n.call(this,t,this.options.confirmIcon);e.className+=" confirm",this.container.appendChild(e),this.notifications.push(e)}}(),window.Aria={init:function(){this.action(),THEME_CONFIG.USE_PJAX&&this.pjax(),THEME_CONFIG.USE_FANCYBOX&&this.fancybox(),THEME_CONFIG.SHOW_HITOKOTO&&this.hitokoto(),this.hljs(),this.commentPlus(),this.ajaxAvatar(),THEME_CONFIG.USE_AJAX_COMMENT&&this.ajaxComment(),THEME_CONFIG.USE_LAZYLOAD&&this.lazyload(),this.postOther(),console.log("%cVer "+THEME_CONFIG.THEME_VERSION+"%cTypecho-Theme-Aria%cBy Siphils https://eriri.ink/","color: #fff; background: #435561; padding:8px 8px;","color: #fff; background: #435561cf; padding:8px 8px;","color: #fff; background: #6fa8dc; padding:8px 8px;")},pjax:function(){$(document).pjax('a[href^="'+THEME_CONFIG.SITE_URL+'"]:not(a[target="_blank"], [no-pjax],a[rel~="nofollow"])',{container:"#pjax-container",fragment:"#pjax-container",timeout:8e3}).on("pjax:send",function(){NProgress.start(),Aria.doPjaxStartAction()}).on("pjax:complete",function(){NProgress.done(),Aria.doPjaxCompleteAction()})},fancybox:function(){$(".post-content img").length&&($("img:not([class~='link-avatar'])",".post-content").wrap(function(){return'<a href="'+this.src+'" data-caption="'+this.title+'" no-pjax class="fancybox" data-fancybox="gallery" style="outline:0"></a>'}),$("img",".comment-main").wrap(function(){return'<a href="'+this.src+'" data-caption="'+this.title+'" no-pjax class="fancybox" style="outline:0"></a>'}),$("a.fancybox").fancybox({animationEffect:"zoom-in-out",animationDuration:500,transitionEffect:"tube",transitionDuration:500,spinnerTpl:'<img style="position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);" src="'+THEME_CONFIG.THEME_URL+'/assets/img/loading.gif">'}))},hitokoto:function(){$.ajax({type:"GET",url:"https://v1.hitokoto.cn/?c=a&encode=text",success:function(t){$("#hitokoto").html(t)}})},hljs:function(){$("pre code").each(function(t,n){hljs.highlightBlock(n)}),$("ol.line-number").length||$("pre>code").each(function(){for(var t=$(this),n=parseInt(t.data("line-start")),e=parseInt(t.data("line-focus")),a=t.html().split("\n"),r=a.length,o='<ol class="line-number" '+(isNaN(n)?"":'start="'+n+'"')+">",i=0;i<r;i++)o+=i===e-n?'<li class="hightlight">':"<li>",o+=a[i]+"</li>";o+="</ol>";var a=t.empty().append(o)})},commentPlus:function(){if($(".OwO").length){new OwO({logo:'<i class="iconfont icon-aria-emotion"></i>表情',container:document.getElementsByClassName("OwO")[0],target:document.getElementsByClassName("textarea")[0],api:THEME_CONFIG.OWO_JSON,position:"down",width:"100%",maxHeight:"250px"})}$(".comment-image").length&&($(".comment-image")[0].onclick=function(){$("textarea")[0].value+="![图片描述](图片地址)"})},ajaxAvatar:function(){function t(){email_value=e.value,email_md5=hex_md5(email_value),new_gravatar="https://cn.gravatar.com/avatar/"+email_md5+"?s=128&r=G",n.setAttribute("src",new_gravatar)}if($("#comment-cur-avatar").length){var n=document.getElementById("comment-cur-avatar"),e=document.getElementById("mail");e.value&&t();var a=navigator.userAgent.toLowerCase(),r=a.indexOf("webkit")!=-1;r?e.onblur=t:e.onchange=t,t()}},doPjaxStartAction:function(){$("#header").addClass("slideOutUp"),$("#body").addClass("fadeOut")},doPjaxCompleteAction:function(){$("#header").removeClass("slideOutUp").addClass("slideInDown"),$("#body").removeClass("fadeOut").addClass("fadeIn"),THEME_CONFIG.USE_AJAX_COMMENT&&Aria.ajaxComment(),THEME_CONFIG.USE_FANCYBOX&&Aria.fancybox(),THEME_CONFIG.SHOW_HITOKOTO&&Aria.hitokoto(),THEME_CONFIG.USE_LAZYLOAD&&Aria.lazyload(),Aria.hljs(),Aria.commentPlus(),Aria.ajaxAvatar(),Aria.postOther(),"undefined"!=typeof _hmt&&_hmt.push(["_trackPageview",location.pathname+location.search]),"undefined"!=typeof ga&&ga("send","pageview",location.pathname+location.search),$("#nav-vertical").hasClass("nav-open")&&($("#nav-vertical").removeClass("nav-open"),$("#wrapper").removeClass("wrapper-open"))},ajaxComment:function(){replyTo="";var t=function(){$(".comment-reply a").click(function(){replyTo=$(this).parent().parent().parent().attr("id")}),$(".cancel-comment-reply a").click(function(){replyTo=""})};t(),$("#comment-form").submit(function(){function n(){var t=parseInt($("#response").text());0==t?$("#response").html($("#response").html().replace(/\d+/,t+1)):1==t?$("#response").html($("#response").html().replace(/\d+\sComment/,t+1+" Comments")):$("#response").html($("#response").html().replace(/\d+/,t+1))}function e(){r.attr("disabled",!0).css("cursor","not-allowed"),$(this).css({opacity:".5",background:'url("'+THEME_CONFIG.THEME_URL+'/assets/img/loading.gif") center center no-repeat'}),$("input,textarea",this).attr("disabled",!0)}function a(n){r.attr("disabled",!1).css("cursor","pointer"),o.css({opacity:"1",background:""}),$("input,textarea",o).attr("disabled",!1),n&&($("#textarea").val(""),replyTo=""),t()}var r=$(".submit").eq(0),o=$("#comment-form"),i="",s=new Notyf({delay:3e3}),c=$(this).serializeArray();return e(),$.ajax({type:$(this).attr("method"),url:$(this).attr("action"),data:c,success:function(e){var e=$("<code></code>").append($(e));if(!$("#comments",e).length)return s.alert($(".container",e).eq(0).text()),a(!1),!1;$("input,textarea",o).attr("disabled",!1),$("#textarea").val("");var r;if(i=$(".comment-list",e).html().match(/id=\"?comment-\d+/g).join().match(/\d+/g).sort(function(t,n){return t-n}).pop(),""===replyTo)if($("#page-nav li").hasClass("next"))$("#page-nav a").get(-2).click();else{var c=parseInt($("#page-nav li",e).last().hasClass("next")?$("#page-nav li",e).eq(-2).text():$("#page-nav li",e).last().text()),d=parseInt($("#page-nav li").last().text());if(c&&d!=c){var l=$("#page-nav li",e).last().hasClass("next")?$("#page-nav a",e).eq(-2).attr("href"):$("#page-nav a",e).last().attr("href");$.ajax({url:l,success:function(n){$("#comment-data").html($("#comment-data",n)),$("#comments .comment-list").addClass("animated fadeInUp"),t()},error:function(t){window.location.href=l}})}else r=$("#li-comment-"+i,e),$(".comment-list").length||$("#comment-data").append('<ol class="comment-list"></ol>'),$("#comments .comment-list").first().append(r.addClass("animated fadeInUp")),n()}else r=$("#li-comment-"+i,e),$("#"+replyTo).find(".comment-children").length?($("#"+replyTo+" .comment-children .comment-list").first().prepend(r.addClass("animated fadeInUp")),TypechoComment.cancelReply()):($("#"+replyTo).append('<div class="comment-children"><ol class="comment-list"></ol></div>'),$("#"+replyTo+" .comment-children .comment-list").first().prepend(r.addClass("animated fadeInUp")),TypechoComment.cancelReply()),n();a(!0),s.confirm("评论提交成功！")},error:function(t){console.log("error"),console.error(t)}}),!1})},lazyload:function(){$("img:not([no-lazyload])").each(function(){$(this).attr("data-original",$(this).attr("src")),$(this).attr("src","http://localhost/usr/themes/Aria/assets/img/loading.gif")}),$(".lazyload").lazyload({effect:"fadeIn"}),$("img:not([no-lazyload])").lazyload({effect:"fadeIn"})},postOther:function(){THEME_CONFIG.SHOW_QRCODE&&$(".post-qrcode").length&&$(".post-qrcode>a").on("click",function(){"none"!==$(".post-qrcode>div").css("display")?$(".post-qrcode>div").fadeOut():$(".post-qrcode>div").fadeIn().css("display","block")}),THEME_CONFIG.SHOW_REWARD&&$(".post-reward").length&&$(".post-reward>a").on("click",function(){"none"!==$(".post-reward>ul").css("display")?$(".post-reward>ul").fadeOut():$(".post-reward>ul").fadeIn().css("display","block")})},action:function(){$("#nav-vertical").hasClass("nav-open")&&($("#nav-vertical").removeClass("nav-open"),$("#wrapper").removeClass("wrapper-open")),$("#nav-menu-btn").on("click",function(){$("#nav-vertical").addClass("nav-open"),$("#wrapper").addClass("wrapper-open")}),$("#nav-vertical>.close").on("click",function(){$("#nav-vertical").removeClass("nav-open"),$("#wrapper").removeClass("wrapper-open")}),$("#search-box").hasClass("search-box-open")&&$("#search-box").removeClass("search-box-open"),$("#nav-search-btn").on("click",function(){$("#search-box").addClass("search-box-open")}),$("#search-box>.close").on("click",function(){$("#search-box").removeClass("search-box-open")}),$(window).scroll(function(){$(window).scrollTop()>100?$("#go-top").fadeIn(500):$("#go-top").fadeOut(500,function(){$("#go-top").css("display","none")})}),$("#go-top").click(function(){return $("body,html").animate({scrollTop:0},1e3,function(){$("#go-top").animate({opacity:"100"})}),!1}),window.addEventListener("scroll",function(){var t=document.documentElement.scrollTop||document.body.scrollTop,n=document.documentElement.scrollHeight,e=document.documentElement.clientHeight,a=parseInt(t/(n-e)*100)+"%",r=document.getElementById("scroll-percentage");r.innerHTML=a});var t=function(){var t=document.querySelector("#nav-menu"),n=new Headroom(t);n.init()};t()}},window.onload=Aria.init();