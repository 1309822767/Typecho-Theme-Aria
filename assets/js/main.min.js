/**
 * Typecho-Theme-Aria - The Aria of the Maple Leaves.
 * 
 * @author Siphils
 * @email siphils16@gmail.com
 * @version v1.7.0
 * @link https://eriri.ink
 * @license GNU General Public License v2.0
 * 
 */
var hexcase=0,b64pad="";function hex_md5(t){return rstr2hex(rstr_md5(str2rstr_utf8(t)))}function b64_md5(t){return rstr2b64(rstr_md5(str2rstr_utf8(t)))}function any_md5(t,n){return rstr2any(rstr_md5(str2rstr_utf8(t)),n)}function hex_hmac_md5(t,n){return rstr2hex(rstr_hmac_md5(str2rstr_utf8(t),str2rstr_utf8(n)))}function b64_hmac_md5(t,n){return rstr2b64(rstr_hmac_md5(str2rstr_utf8(t),str2rstr_utf8(n)))}function any_hmac_md5(t,n,a){return rstr2any(rstr_hmac_md5(str2rstr_utf8(t),str2rstr_utf8(n)),a)}function md5_vm_test(){return"900150983cd24fb0d6963f7d28e17f72"==hex_md5("abc").toLowerCase()}function rstr_md5(t){return binl2rstr(binl_md5(rstr2binl(t),8*t.length))}function rstr_hmac_md5(t,n){var a=rstr2binl(t);16<a.length&&(a=binl_md5(a,8*t.length));for(var e=Array(16),r=Array(16),o=0;o<16;o++)e[o]=909522486^a[o],r[o]=1549556828^a[o];var i=binl_md5(e.concat(rstr2binl(n)),512+8*n.length);return binl2rstr(binl_md5(r.concat(i),640))}function rstr2hex(t){for(var n,a=hexcase?"0123456789ABCDEF":"0123456789abcdef",e="",r=0;r<t.length;r++)n=t.charCodeAt(r),e+=a.charAt(n>>>4&15)+a.charAt(15&n);return e}function rstr2b64(t){for(var n="",a=t.length,e=0;e<a;e+=3)for(var r=t.charCodeAt(e)<<16|(e+1<a?t.charCodeAt(e+1)<<8:0)|(e+2<a?t.charCodeAt(e+2):0),o=0;o<4;o++)8*e+6*o>8*t.length?n+=b64pad:n+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(r>>>6*(3-o)&63);return n}function rstr2any(t,n){var a,e,r,o,i,s=n.length,c=Array(Math.ceil(t.length/2));for(a=0;a<c.length;a++)c[a]=t.charCodeAt(2*a)<<8|t.charCodeAt(2*a+1);var l=Math.ceil(8*t.length/(Math.log(n.length)/Math.log(2))),d=Array(l);for(e=0;e<l;e++){for(i=Array(),a=o=0;a<c.length;a++)o=(o<<16)+c[a],o-=(r=Math.floor(o/s))*s,(0<i.length||0<r)&&(i[i.length]=r);d[e]=o,c=i}var m="";for(a=d.length-1;0<=a;a--)m+=n.charAt(d[a]);return m}function str2rstr_utf8(t){for(var n,a,e="",r=-1;++r<t.length;)n=t.charCodeAt(r),a=r+1<t.length?t.charCodeAt(r+1):0,55296<=n&&n<=56319&&56320<=a&&a<=57343&&(n=65536+((1023&n)<<10)+(1023&a),r++),n<=127?e+=String.fromCharCode(n):n<=2047?e+=String.fromCharCode(192|n>>>6&31,128|63&n):n<=65535?e+=String.fromCharCode(224|n>>>12&15,128|n>>>6&63,128|63&n):n<=2097151&&(e+=String.fromCharCode(240|n>>>18&7,128|n>>>12&63,128|n>>>6&63,128|63&n));return e}function str2rstr_utf16le(t){for(var n="",a=0;a<t.length;a++)n+=String.fromCharCode(255&t.charCodeAt(a),t.charCodeAt(a)>>>8&255);return n}function str2rstr_utf16be(t){for(var n="",a=0;a<t.length;a++)n+=String.fromCharCode(t.charCodeAt(a)>>>8&255,255&t.charCodeAt(a));return n}function rstr2binl(t){for(var n=Array(t.length>>2),a=0;a<n.length;a++)n[a]=0;for(a=0;a<8*t.length;a+=8)n[a>>5]|=(255&t.charCodeAt(a/8))<<a%32;return n}function binl2rstr(t){for(var n="",a=0;a<32*t.length;a+=8)n+=String.fromCharCode(t[a>>5]>>>a%32&255);return n}function binl_md5(t,n){t[n>>5]|=128<<n%32,t[14+(n+64>>>9<<4)]=n;for(var a=1732584193,e=-271733879,r=-1732584194,o=271733878,i=0;i<t.length;i+=16){var s=a,c=e,l=r,d=o;e=md5_ii(e=md5_ii(e=md5_ii(e=md5_ii(e=md5_hh(e=md5_hh(e=md5_hh(e=md5_hh(e=md5_gg(e=md5_gg(e=md5_gg(e=md5_gg(e=md5_ff(e=md5_ff(e=md5_ff(e=md5_ff(e,r=md5_ff(r,o=md5_ff(o,a=md5_ff(a,e,r,o,t[i+0],7,-680876936),e,r,t[i+1],12,-389564586),a,e,t[i+2],17,606105819),o,a,t[i+3],22,-1044525330),r=md5_ff(r,o=md5_ff(o,a=md5_ff(a,e,r,o,t[i+4],7,-176418897),e,r,t[i+5],12,1200080426),a,e,t[i+6],17,-1473231341),o,a,t[i+7],22,-45705983),r=md5_ff(r,o=md5_ff(o,a=md5_ff(a,e,r,o,t[i+8],7,1770035416),e,r,t[i+9],12,-1958414417),a,e,t[i+10],17,-42063),o,a,t[i+11],22,-1990404162),r=md5_ff(r,o=md5_ff(o,a=md5_ff(a,e,r,o,t[i+12],7,1804603682),e,r,t[i+13],12,-40341101),a,e,t[i+14],17,-1502002290),o,a,t[i+15],22,1236535329),r=md5_gg(r,o=md5_gg(o,a=md5_gg(a,e,r,o,t[i+1],5,-165796510),e,r,t[i+6],9,-1069501632),a,e,t[i+11],14,643717713),o,a,t[i+0],20,-373897302),r=md5_gg(r,o=md5_gg(o,a=md5_gg(a,e,r,o,t[i+5],5,-701558691),e,r,t[i+10],9,38016083),a,e,t[i+15],14,-660478335),o,a,t[i+4],20,-405537848),r=md5_gg(r,o=md5_gg(o,a=md5_gg(a,e,r,o,t[i+9],5,568446438),e,r,t[i+14],9,-1019803690),a,e,t[i+3],14,-187363961),o,a,t[i+8],20,1163531501),r=md5_gg(r,o=md5_gg(o,a=md5_gg(a,e,r,o,t[i+13],5,-1444681467),e,r,t[i+2],9,-51403784),a,e,t[i+7],14,1735328473),o,a,t[i+12],20,-1926607734),r=md5_hh(r,o=md5_hh(o,a=md5_hh(a,e,r,o,t[i+5],4,-378558),e,r,t[i+8],11,-2022574463),a,e,t[i+11],16,1839030562),o,a,t[i+14],23,-35309556),r=md5_hh(r,o=md5_hh(o,a=md5_hh(a,e,r,o,t[i+1],4,-1530992060),e,r,t[i+4],11,1272893353),a,e,t[i+7],16,-155497632),o,a,t[i+10],23,-1094730640),r=md5_hh(r,o=md5_hh(o,a=md5_hh(a,e,r,o,t[i+13],4,681279174),e,r,t[i+0],11,-358537222),a,e,t[i+3],16,-722521979),o,a,t[i+6],23,76029189),r=md5_hh(r,o=md5_hh(o,a=md5_hh(a,e,r,o,t[i+9],4,-640364487),e,r,t[i+12],11,-421815835),a,e,t[i+15],16,530742520),o,a,t[i+2],23,-995338651),r=md5_ii(r,o=md5_ii(o,a=md5_ii(a,e,r,o,t[i+0],6,-198630844),e,r,t[i+7],10,1126891415),a,e,t[i+14],15,-1416354905),o,a,t[i+5],21,-57434055),r=md5_ii(r,o=md5_ii(o,a=md5_ii(a,e,r,o,t[i+12],6,1700485571),e,r,t[i+3],10,-1894986606),a,e,t[i+10],15,-1051523),o,a,t[i+1],21,-2054922799),r=md5_ii(r,o=md5_ii(o,a=md5_ii(a,e,r,o,t[i+8],6,1873313359),e,r,t[i+15],10,-30611744),a,e,t[i+6],15,-1560198380),o,a,t[i+13],21,1309151649),r=md5_ii(r,o=md5_ii(o,a=md5_ii(a,e,r,o,t[i+4],6,-145523070),e,r,t[i+11],10,-1120210379),a,e,t[i+2],15,718787259),o,a,t[i+9],21,-343485551),a=safe_add(a,s),e=safe_add(e,c),r=safe_add(r,l),o=safe_add(o,d)}return Array(a,e,r,o)}function md5_cmn(t,n,a,e,r,o){return safe_add(bit_rol(safe_add(safe_add(n,t),safe_add(e,o)),r),a)}function md5_ff(t,n,a,e,r,o,i){return md5_cmn(n&a|~n&e,t,n,r,o,i)}function md5_gg(t,n,a,e,r,o,i){return md5_cmn(n&e|a&~e,t,n,r,o,i)}function md5_hh(t,n,a,e,r,o,i){return md5_cmn(n^a^e,t,n,r,o,i)}function md5_ii(t,n,a,e,r,o,i){return md5_cmn(a^(n|~e),t,n,r,o,i)}function safe_add(t,n){var a=(65535&t)+(65535&n);return(t>>16)+(n>>16)+(a>>16)<<16|65535&a}function bit_rol(t,n){return t<<n|t>>>32-n}!function(){function a(t,n){var a=document.createElement("div");a.className="notyf";var e=document.createElement("div");e.className="notyf-wrapper";var r=document.createElement("div");r.className="notyf-icon";var o=document.createElement("i");o.className=n;var i=document.createElement("div");i.className="notyf-message",i.innerHTML=t,r.appendChild(o),e.appendChild(r),e.appendChild(i),a.appendChild(e);var s=this;return setTimeout(function(){a.className+=" disappear",a.addEventListener(s.animationEnd,function(t){t.target==a&&s.container.removeChild(a)});var t=s.notifications.indexOf(a);s.notifications.splice(t,1)},s.options.delay),a}this.Notyf=function(){this.notifications=[];var t={delay:2e3,alertIcon:"notyf-alert-icon",confirmIcon:"notyf-confirm-icon"};arguments[0]&&"object"==typeof arguments[0]?this.options=function(t,n){for(property in n)n.hasOwnProperty(property)&&(t[property]=n[property]);return t}(t,arguments[0]):this.options=t;var n=document.createDocumentFragment(),a=document.createElement("div");a.className="notyf-container",n.appendChild(a),document.body.appendChild(n),this.container=a,this.animationEnd=function(){var t,n=document.createElement("fake"),a={transition:"animationend",OTransition:"oAnimationEnd",MozTransition:"animationend",WebkitTransition:"webkitAnimationEnd"};for(t in a)if(void 0!==n.style[t])return a[t]}()},this.Notyf.prototype.alert=function(t){var n=a.call(this,t,this.options.alertIcon);n.className+=" alert",this.container.appendChild(n),this.notifications.push(n)},this.Notyf.prototype.confirm=function(t){var n=a.call(this,t,this.options.confirmIcon);n.className+=" confirm",this.container.appendChild(n),this.notifications.push(n)}}(),window.Aria={init:function(){this.action(),THEME_CONFIG.USE_PJAX&&this.pjax(),THEME_CONFIG.USE_FANCYBOX&&this.fancybox(),THEME_CONFIG.SHOW_HITOKOTO&&this.hitokoto(),this.hljs(),this.commentPlus(),this.ajaxAvatar(),THEME_CONFIG.USE_AJAX_COMMENT&&this.ajaxComment(),THEME_CONFIG.USE_LAZYLOAD&&this.lazyload(),this.postOther(),console.log("%cVer "+THEME_CONFIG.THEME_VERSION+"%cTypecho-Theme-Aria%cBy Siphils https://eriri.ink/","color: #fff; background: #435561; padding:8px 8px;","color: #fff; background: #435561cf; padding:8px 8px;","color: #fff; background: #6fa8dc; padding:8px 8px;")},pjax:function(){$(document).pjax('a[href^="'+THEME_CONFIG.SITE_URL+'"]:not(a[target="_blank"], [no-pjax],a[rel~="nofollow"])',{container:"#pjax-container",fragment:"#pjax-container",timeout:8e3}).on("pjax:send",function(){NProgress.start(),Aria.doPjaxStartAction()}).on("pjax:complete",function(){NProgress.done(),Aria.doPjaxCompleteAction()})},fancybox:function(){($(".post-content img").length||$(".comment-content img").length)&&($("img:not([class~='link-avatar'])",".post-content").wrap(function(){return'<a href="'+this.src+'" data-caption="'+this.title+'" no-pjax class="fancybox" data-fancybox="gallery" style="outline:0"></a>'}),$("img",".comment-text").wrap(function(){return'<a href="'+this.src+'" data-caption="'+this.title+'" no-pjax class="fancybox" style="outline:0"></a>'}),$("a.fancybox").fancybox({animationEffect:"zoom-in-out",animationDuration:500,transitionEffect:"tube",transitionDuration:500,spinnerTpl:'<img style="position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);" src="'+THEME_CONFIG.THEME_URL+'/assets/img/loading.gif">'}))},hitokoto:function(){$.ajax({type:"GET",url:"https://v1.hitokoto.cn/?c=a&encode=text",success:function(t){$("#hitokoto").html(t)}})},hljs:function(){$("pre code").each(function(t,n){hljs.highlightBlock(n)}),$("ol.line-number").length||$("pre>code").each(function(){for(var t=$(this),n=parseInt(t.data("line-start")),a=parseInt(t.data("line-focus")),e=(i=t.html().split("\n")).length,r='<ol class="line-number" '+(isNaN(n)?"":'start="'+n+'"')+">",o=0;o<e;o++)r+=o===a-n?'<li class="hightlight">':"<li>",r+=i[o]+"</li>";r+="</ol>";var i=t.empty().append(r)})},commentPlus:function(){if($(".OwO").length)new OwO({logo:'<i class="iconfont icon-aria-emotion"></i>表情',container:document.getElementsByClassName("OwO")[0],target:document.getElementsByClassName("textarea")[0],api:THEME_CONFIG.OWO_JSON,position:"down",width:"100%",maxHeight:"250px"});$(".comment-image").length&&($(".comment-image")[0].onclick=function(){$("textarea")[0].value+="![图片描述](图片地址)"})},ajaxAvatar:function(){if($("#comment-cur-avatar").length){var t=document.getElementById("comment-cur-avatar"),n=document.getElementById("mail");function a(){email_value=n.value,email_md5=hex_md5(email_value),new_gravatar="https://cn.gravatar.com/avatar/"+email_md5+"?s=128&r=G",t.setAttribute("src",new_gravatar)}n.value&&a(),-1!=navigator.userAgent.toLowerCase().indexOf("webkit")?n.onblur=a:n.onchange=a,a()}},doPjaxStartAction:function(){$("#header").addClass("slideOutUp"),$("#body").addClass("fadeOut")},doPjaxCompleteAction:function(){$("#header").removeClass("slideOutUp").addClass("slideInDown"),$("#body").removeClass("fadeOut").addClass("fadeIn"),THEME_CONFIG.USE_AJAX_COMMENT&&Aria.ajaxComment(),THEME_CONFIG.USE_FANCYBOX&&Aria.fancybox(),THEME_CONFIG.SHOW_HITOKOTO&&Aria.hitokoto(),THEME_CONFIG.USE_LAZYLOAD&&Aria.lazyload(),Aria.hljs(),Aria.commentPlus(),Aria.ajaxAvatar(),Aria.postOther(),"undefined"!=typeof _hmt&&_hmt.push(["_trackPageview",location.pathname+location.search]),"undefined"!=typeof ga&&ga("send","pageview",location.pathname+location.search),$("#nav-vertical").hasClass("nav-open")&&($("#nav-vertical").removeClass("nav-open"),$("#wrapper").removeClass("wrapper-open"))},ajaxComment:function(){replyTo="";var d=function(){$(".comment-reply a").click(function(){replyTo=$(this).parent().parent().parent().parent().attr("id")}),$(".cancel-comment-reply a").click(function(){replyTo=""})};d(),$("#comment-form").submit(function(){var n=$(".submit").eq(0),o=$("#comment-form"),i="",s=new Notyf({delay:3e3}),t=$(this).serializeArray();function c(){var t=parseInt($("#response").text());0==t?$("#response").html($("#response").html().replace(/\d+/,t+1)):1==t?$("#response").html($("#response").html().replace(/\d+\sComment/,t+1+" Comments")):$("#response").html($("#response").html().replace(/\d+/,t+1))}function l(t){n.attr("disabled",!1).css("cursor","pointer"),o.css({opacity:"1"}),$("textarea",o).css({background:"initial"}),$("input,textarea",o).attr("disabled",!1),t&&($("#textarea").val(""),replyTo=""),d()}return n.attr("disabled",!0).css("cursor","not-allowed"),o.css({opacity:".5"}),$("textarea",o).css({background:'url("'+THEME_CONFIG.THEME_URL+'/assets/img/loading.gif") center center no-repeat'}),$("input,textarea",o).attr("disabled",!0),$.ajax({type:$(this).attr("method"),url:$(this).attr("action"),data:t,success:function(t){var n;t=$("<code></code>").append($(t));if(!$("#comments",t).length)return s.alert($(".container",t).eq(0).text()),l(!1),!1;if($("input,textarea",o).attr("disabled",!1),$("#textarea").val(""),i=$(".comment-list",t).html().match(/id=\"?comment-\d+/g).join().match(/\d+/g).sort(function(t,n){return t-n}).pop(),""===replyTo)if($("#page-nav li").hasClass("next"))$("#page-nav a").get(-2).click();else{var a=parseInt($("#page-nav li",t).last().hasClass("next")?$("#page-nav li",t).eq(-2).text():$("#page-nav li",t).last().text()),e=parseInt($("#page-nav li").last().text());if(a&&e!=a){var r=$("#page-nav li",t).last().hasClass("next")?$("#page-nav a",t).eq(-2).attr("href"):$("#page-nav a",t).last().attr("href");$.ajax({url:r,success:function(t){$("#comment-data").html($("#comment-data",t)),$("#comments .comment-list").addClass("animated fadeInUp"),d()},error:function(t){window.location.href=r}})}else n=$("#li-comment-"+i,t),$(".comment-list").length||$("#comment-data").append('<ol class="comment-list"></ol>'),$("#comments .comment-list").first().append(n.addClass("animated fadeInUp")),c()}else n=$("#li-comment-"+i,t),$("#"+replyTo).find(".comment-children").length||$("#"+replyTo).append('<div class="comment-children"><ol class="comment-list"></ol></div>'),$("#"+replyTo+" .comment-children .comment-list").first().prepend(n.addClass("animated fadeInUp")),TypechoComment.cancelReply(),c();l(!0),s.confirm("评论提交成功！")},error:function(t){console.log("error"),console.error(t)}}),!1})},lazyload:function(){$("img:not([no-lazyload])").each(function(){$(this).attr("data-original",$(this).attr("src")),$(this).attr("src",THEME_CONFIG.THEME_URL+"/assets/img/loading.gif")}),$(".lazyload").lazyload({effect:"fadeIn"}),$("img:not([no-lazyload])").lazyload({effect:"fadeIn"})},postOther:function(){THEME_CONFIG.SHOW_QRCODE&&$(".post-qrcode").length&&$(".post-qrcode>a").on("click",function(){"none"!==$(".post-qrcode>div").css("display")?$(".post-qrcode>div").fadeOut():$(".post-qrcode>div").fadeIn().css("display","block")}),THEME_CONFIG.SHOW_REWARD&&$(".post-reward").length&&$(".post-reward>a").on("click",function(){"none"!==$(".post-reward>ul").css("display")?$(".post-reward>ul").fadeOut():$(".post-reward>ul").fadeIn().css("display","block")})},action:function(){$("#nav-vertical").hasClass("nav-open")&&($("#nav-vertical").removeClass("nav-open"),$("#wrapper").removeClass("wrapper-open")),$("#nav-menu-btn").click(function(t){t.stopPropagation(),$("#nav-vertical").addClass("nav-open"),$("#wrapper").addClass("wrapper-open"),$("#nav-vertical").hasClass("nav-open")&&$(document).one("click",function(){$("#nav-vertical").removeClass("nav-open"),$("#wrapper").removeClass("wrapper-open")})}),$("#nav-vertical").on("click",function(t){t.stopPropagation()}),$("#nav-vertical>.close").on("click",function(){$("#nav-vertical").removeClass("nav-open"),$("#wrapper").removeClass("wrapper-open")}),$("#search-box").hasClass("search-box-open")&&$("#search-box").removeClass("search-box-open"),$("#nav-search-btn").on("click",function(){$("#search-box").addClass("search-box-open")}),$("#search-box>.close").on("click",function(){$("#search-box").removeClass("search-box-open")}),$(window).scroll(function(){100<$(window).scrollTop()?$("#go-top").fadeIn(500):$("#go-top").fadeOut(500,function(){$("#go-top").css("display","none")})}),$("#go-top").click(function(){return $("#go-top").animate({bottom:135,opacity:0}),$("body,html").animate({scrollTop:0},1e3,function(){$("#go-top").animate({bottom:100,opacity:1})}),!1}),window.addEventListener("scroll",function(){(document.documentElement.scrollTop||document.body.scrollTop)<=0?$("#site-avatar").css({height:"35px",width:"35px",margin:"7.5px 5px 0 0"}):$("#site-avatar").css({height:"25px",width:"25px",margin:"12.5px 5px 0 0"})});var t;t=document.querySelector("#nav-menu"),new Headroom(t).init()}},window.onload=Aria.init();var CloseAll=function(){$("#nav-vertical").hasClass("nav-open")&&($("#nav-vertical").removeClass("nav-open"),$("#wrapper").removeClass("wrapper-open"))};